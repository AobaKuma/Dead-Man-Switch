<?xml version="1.0" encoding="utf-8"?>
<Defs>
  
  <ThingDef ParentName="BaseAutomatroidRace">
    <defName>DMS_Mech_Tarbosaurus</defName>
    <label>tarbosaurus</label>
    <description>bipedal ultra heavy automatoid nickname "Armored Rex" for their distinctive body structure vaguely resembling carnotaurus. Once seen as the nextgen war-changer in the hayday of arm race back in the early spacer era, it sports numerous cutting-edge technology, the artificial muscle fibre that drove its oversized legs-first of its kind for automatoids in service. \n\nWhile it failed to eventually change the modern warfare as expected: it is oversized, its artificial muscle fibre is hard to upkeep, and, on top of that, railguns and beam weaponry aren't a reliable thing back in its days; \n\nAfter all those milenina, there still have been numerous manufacturers replicating such automatroids and adding their own improvements to its design. As such, traces of technology adopted in this automatroid can be seen in a great number of weaponry nowadays.</description>
    <!-- <size>(2,2)</size> -->
    <statBases>
      <MoveSpeed>4</MoveSpeed>
      <ArmorRating_Sharp>1.4</ArmorRating_Sharp><!--銳抗-->
      <ArmorRating_Blunt>0.85</ArmorRating_Blunt><!--鈍抗-->
      <ArmorRating_Heat>2</ArmorRating_Heat>  <!--能抗-->
      <StaggerDurationFactor>0</StaggerDurationFactor>
      <BandwidthCost MayRequire="Ludeon.Rimworld.Biotech">10</BandwidthCost>        <!--帶寬消耗-->
      <WastepacksPerRecharge MayRequire="Ludeon.Rimworld.Biotech">2</WastepacksPerRecharge><!--充電/培養時產出廢料-->
    </statBases>
    <race>
      <body>DMS_Bipedal</body>
      <nameGenerator>DMS_VanguardMechHeavy</nameGenerator>
      <baseBodySize>3.5</baseBodySize>
      <baseHealthScale>5</baseHealthScale>
      <mechWeightClass>UltraHeavy</mechWeightClass>
    </race>
    <comps>
		  <li Class="DMS.CompProperties_VehicleWeapon">
        <drawData>
          <dataEast>
              <offset>(-0.2,0,0.9)</offset>
              <layer>-20</layer>
          </dataEast>
          <dataWest>
              <offset>(0.2,0,-0.4)</offset>
          </dataWest>
          <dataSouth>
              <offset>(0.9,0,0)</offset>
          </dataSouth>
          <dataNorth>
              <offset>(-0.9,0,0)</offset>
          </dataNorth>
        </drawData>
			  <turretRotationFollowPawn>true</turretRotationFollowPawn>			  
        <rotationSmoothTime>0.12</rotationSmoothTime>
      </li>
		  <li Class="DMS.CompPropertiesMultipleTurretGun">
          <subTurrets>
            <li>
              <ID>heavy machinegun</ID>
              <turret>DMS_HeavyMachineGunMounted</turret>
              <autoAttack>true</autoAttack>
              <command_ToggleFire>fire at will</command_ToggleFire>
              <commandDesc_ToggleFire>toggle turret to manually control mode to prevent unnecessary shooting.</commandDesc_ToggleFire>
              <command_Target>aim target</command_Target>
              <commandDesc_Target>aim at desinated target</commandDesc_Target>
              <warmingTime>5</warmingTime>
              <targetCommandIconPath>UI/Gizmos/ToggleTurret</targetCommandIconPath>
              <angleOffset>-90</angleOffset>
              <renderNodeProperties>
                <li>
                  <nodeClass>DMS.PawnRenderNode_SubTurretGun</nodeClass>
                  <workerClass>DMS.PawnRenderNodeWorker_SubTurretGun</workerClass>
                  <parentTagDef>Body</parentTagDef>
                  <drawSize>1.75</drawSize>
                  <baseLayer>-21</baseLayer>
                  <pawnType>Any</pawnType>
                  <drawData>
                    <dataEast>
                        <offset>(1,0,-0.35)</offset>
                    </dataEast>
                    <dataWest>
                        <offset>(-1.0,0,-0.35)</offset>
                        <rotationOffset>180</rotationOffset>
                    </dataWest>
                    <dataSouth>
                        <offset>(0,0,-1.2)</offset>
                    </dataSouth>
                    <dataNorth>
                        <offset>(0,0,0.5)</offset>
                    </dataNorth>
                  </drawData>
                </li>
              </renderNodeProperties>
            </li>
            <li>
              <ID>close inbound system</ID>
              <turret>DMS_ShotgunGunMounted</turret>
              <autoAttack>true</autoAttack>
              <command_ToggleFire>fire at will</command_ToggleFire>
              <commandDesc_ToggleFire>toggle turret to manually control mode to prevent unnecessary shooting.</commandDesc_ToggleFire>
              <command_Target>aim target</command_Target>
              <commandDesc_Target>aim at desinated target</commandDesc_Target>
              <warmingTime>2</warmingTime>
              <targetCommandIconPath>UI/Gizmos/ToggleTurret</targetCommandIconPath>
              <angleOffset>-90</angleOffset>
              <renderNodeProperties>
                <li>
                  <nodeClass>DMS.PawnRenderNode_SubTurretGun</nodeClass>
                  <workerClass>DMS.PawnRenderNodeWorker_SubTurretGun</workerClass>
                  <parentTagDef>Body</parentTagDef>
                  <drawSize>0.5</drawSize>
                  <baseLayer>20</baseLayer>
                  <pawnType>Any</pawnType>
                  <drawData>
                    <dataEast>
                        <offset>(-0.15,0,-0.75)</offset>
                    </dataEast>
                    <dataWest>
                        <offset>(0.15,0,0.5)</offset>
                        <layer>-22</layer>
                        <rotationOffset>180</rotationOffset>
                    </dataWest>
                    <dataSouth>
                        <offset>(-0.9,0,-0.05)</offset>
                        <rotationOffset>10</rotationOffset>
                    </dataSouth>
                    <dataNorth>
                        <offset>(1,0,-0.25)</offset>
                        <rotationOffset>10</rotationOffset>
                    </dataNorth>
                  </drawData>
                </li>
              </renderNodeProperties>
            </li>
          </subTurrets>
      </li>
    </comps>
    <modExtensions>
      <li Class="DMS.MechWeaponExtension">
        <EnableWeaponFilter>true</EnableWeaponFilter>
        <UsableWeaponTags>
          <li>HeavyGun</li><!--重型武器拓展-->
          <li>WarcasketBasic</li><!--戰棺海盜拓展-->
          <li>WarcasketVeteran</li><!--戰棺海盜拓展-->
          <li>DMS_Tarbosaurus_Gun</li>
          <li>DMS_MechWeaponUltraHeavy</li>
          <li>DMS_MechWeaponHeavy</li>
          <li>H_Gatling20mm</li>
          <li>V_Gatling30mm</li>
        </UsableWeaponTags>
        <EnableTechLevelFilter>true</EnableTechLevelFilter>
        <UsableTechLevels>
          <li>Industrial</li>
        </UsableTechLevels>
      </li>
    </modExtensions>
    <tools Inherit="False">
      <li>
        <label>Mechanical Head</label>
        <capacities>
          <li>Blunt</li>
        </capacities>
        <power>35</power>
        <cooldownTime>5.5</cooldownTime>
        <linkedBodyPartsGroup>HeadAttackTool</linkedBodyPartsGroup>
        <ensureLinkedBodyPartsGroupAlwaysUsable>true</ensureLinkedBodyPartsGroupAlwaysUsable>
        <chanceFactor>0.08</chanceFactor>
		    <surpriseAttack>
          <extraMeleeDamages>
            <li>
              <def>Stun</def>
              <amount>20</amount>
            </li>
          </extraMeleeDamages>
        </surpriseAttack>
      </li>
      <li>
        <label>Left Leg</label>
        <capacities>
          <li>Blunt</li>
        </capacities>
        <power>24</power>
        <cooldownTime>3.5</cooldownTime>
        <linkedBodyPartsGroup>LeftMechanicalLeg</linkedBodyPartsGroup>
        <ensureLinkedBodyPartsGroupAlwaysUsable>true</ensureLinkedBodyPartsGroupAlwaysUsable>
        <chanceFactor>0.2</chanceFactor>
		    <surpriseAttack>
          <extraMeleeDamages>
            <li>
              <def>Stun</def>
              <amount>16</amount>
            </li>
          </extraMeleeDamages>
        </surpriseAttack>
      </li>
      <li>
        <label>Right Leg</label>
        <capacities>
          <li>Blunt</li>
        </capacities>
        <power>24</power>
        <cooldownTime>3.5</cooldownTime>
        <linkedBodyPartsGroup>RightMechanicalLeg</linkedBodyPartsGroup>
        <ensureLinkedBodyPartsGroupAlwaysUsable>true</ensureLinkedBodyPartsGroupAlwaysUsable>
        <chanceFactor>0.2</chanceFactor>
		    <surpriseAttack>
          <extraMeleeDamages>
            <li>
              <def>Stun</def>
              <amount>16</amount>
            </li>
          </extraMeleeDamages>
        </surpriseAttack>
      </li>
    </tools>
    <damageMultipliers>
      <li>
        <damageDef>Blunt</damageDef>
        <multiplier>0.6</multiplier>
      </li>
    </damageMultipliers>
    <killedLeavingsPlayerHostile>
      <ComponentFireControl>1</ComponentFireControl>
    </killedLeavingsPlayerHostile>
    <castEdgeShadows>false</castEdgeShadows>
    <staticSunShadowHeight>0</staticSunShadowHeight>
  </ThingDef>

  <PawnKindDef ParentName="BaseAutomatroidKind">
    <defName>DMS_Mech_Tarbosaurus</defName>
    <label>tarbosaurus</label>
    <race>DMS_Mech_Tarbosaurus</race>
    <isFighter>true</isFighter>
    <combatPower>300</combatPower>                                               <!--威脅點數-->
    <maxPerGroup>2</maxPerGroup>                                                 <!--單個集群內的數量-->
    <isBoss>true</isBoss>
    <lifeStages>                                                                 <!--身體圖片-->
      <li>
        <bodyGraphicData>
          <texPath>Things/Automatroid/tarbosaurus</texPath>
          <shaderType>CutoutComplex</shaderType>
          <graphicClass>Graphic_Multi</graphicClass>
          <drawSize>4</drawSize>
          <shadowData>
            <volume>(1.25,1,1.25)</volume>
            <offset>(0,0,-0.5)</offset>
          </shadowData>
        </bodyGraphicData>
      </li>
      <li>
        <bodyGraphicData>
          <texPath>Things/Automatroid/OldTexture/tarbosaurus</texPath>
          <shaderType>CutoutComplex</shaderType>
          <graphicClass>Graphic_Multi</graphicClass>
          <drawSize>4</drawSize>
          <shadowData>
            <volume>(1.25,1,1.25)</volume>
            <offset>(0,0,-0.5)</offset>
          </shadowData>
        </bodyGraphicData>
      </li>
    </lifeStages>
    <weaponTags>
      <li>DMS_MechWeaponUltraHeavy</li>
    </weaponTags>
    <weaponMoney>9999~9999</weaponMoney>
    <abilities>
      <li>DMS_TarbosaurusJump</li>
      <li>DMS_RepairMode</li>
    </abilities>
  </PawnKindDef>

</Defs>