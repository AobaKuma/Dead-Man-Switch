<?xml version="1.0" encoding="utf-8"?>

<Defs>

  <JobDef>
    <defName>DMS_Modification</defName>
    <driverClass>DMS.JobDriver_ApplyModification</driverClass>
    <reportString>modifing TargetA.</reportString>
    <allowOpportunisticPrefix>true</allowOpportunisticPrefix>
  </JobDef>

  <!-- 陶瓷裝甲板 -->
  <ThingDef ParentName="ResourceBase">
    <defName>DMS_CeramicsPlating</defName>
    <label>ceramic plates</label>
    <description>A set of ceramic plates can be mounted on the mech's external shell to provide additional protection, but once damaged it can only be replaced with a new one. \n\nThe maximum amount of the plating on mech can apply depends on its body size.</description>
    <descriptionHyperlinks>
      <HediffDef>DMS_CeramicsPlating</HediffDef>
    </descriptionHyperlinks>
    <graphicData>
      <texPath>Things/Resource/CeramicPlate</texPath>
      <graphicClass>Graphic_Stackcount</graphicClass>
      <drawSize>1</drawSize>
    </graphicData>
    <thingClass>ThingWithComps</thingClass>
    <useHitPoints>true</useHitPoints>
    <statBases>
      <MaxHitPoints>60</MaxHitPoints>
      <MarketValue>60</MarketValue>
      <Mass>0.5</Mass>
      <Flammability>0.7</Flammability>
    </statBases>
    <tradeTags>
      <li>Serum</li>
    </tradeTags>
    <tradeability>Sellable</tradeability>
    <stackLimit>10</stackLimit>
    <thingCategories>
      <li>Manufactured</li>
    </thingCategories>
    <costList>
      <DMS_Ceramics>40</DMS_Ceramics>
    </costList>
    <recipeMaker>
      <workAmount>840</workAmount>
      <researchPrerequisite>DMS_Material</researchPrerequisite>
      <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
      <workSkill>Crafting</workSkill>
      <recipeUsers>
        <li>DMS_TableMachinePrinter</li>
      </recipeUsers>
    </recipeMaker>
    <comps>
      <li Class="CompProperties_Usable">
        <useJob>UseItem</useJob>
        <useLabel>Use {0_label}</useLabel>
        <useDuration>40</useDuration>
        <showUseGizmo>true</showUseGizmo>
      </li>
      <li Class="DMS.CompProperties_AddHediffOnTarget">
        <compClass>DMS.CompTargetable_AddHediffOnTarget</compClass>
        <hediffDef>DMS_CeramicsPlating</hediffDef>
        <soundDef>DMS_EquipGear</soundDef>
      </li>
    </comps>
  </ThingDef>

  <HediffDef>
    <defName>DMS_CeramicsPlating</defName>
    <hediffClass>HediffWithComps</hediffClass>
    <label>ceramic plates</label>
    <description>deposable ceramic armorplate that effectively inhibits thermal erosion of bullets or shaped charges. \n\nAlthough it is an excellent protective armor, it is still essentially a disposable defensive plate and must be completely replaced once damaged.</description>
    <descriptionHyperlinks>
      <ThingDef>DMS_CeramicsPlating</ThingDef>
    </descriptionHyperlinks>
    <defaultLabelColor>(1, 1, 1)</defaultLabelColor>
    <isBad>false</isBad>
    <comps>
      <li Class="DMS.HediffCompProperties_ProtectiveShield">
        <hitpoints>120</hitpoints>
        <filthOnDamaged>DMS_BrokenCeramics</filthOnDamaged>
        <effectOnDamaged>Deflect_Metal</effectOnDamaged>
      </li>
    </comps>
    <stages>
      <li>
        <capMods>
          <li>
            <capacity>Moving</capacity>
            <offset>-0.15</offset>
          </li>
        </capMods>
        <statOffsets>
          <ArmorRating_Heat>0.5</ArmorRating_Heat>
        </statOffsets>
      </li>
    </stages>
  </HediffDef>

  <ThingDef ParentName="BaseFilth">
    <defName>DMS_BrokenCeramics</defName>
    <label>broken ceramics</label>
    <graphicData>
      <texPath>Things/Filth/BrokenCeramics</texPath>
      <graphicClass>Graphic_Cluster</graphicClass>
    </graphicData>
    <filth>
      <disappearsInDays>45~50</disappearsInDays>
      <cleaningWorkToReduceThickness>35</cleaningWorkToReduceThickness>
      <canFilthAttach>false</canFilthAttach>
      <cleaningSound>Interact_CleanFilth_Scattered</cleaningSound>
    </filth>
  </ThingDef>

  <!-- 強化框架 -->
  <ThingDef ParentName="ResourceBase">
    <defName>DMS_ReinforcedFrame</defName>
    <label>reinforced frame</label>
    <description>A set of tungsteel frame to replace parts that are prone to wear can effectively improve the durability during high-intensity combat and reduce the time spent on maintenance. But in exchange it will significantly increase the weight of the mech and affect its speed</description>
    <descriptionHyperlinks>
      <HediffDef>DMS_ReinforcedFrame</HediffDef>
    </descriptionHyperlinks>
    <graphicData>
      <texPath>Things/Resource/ReinforcedFrame</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>1</drawSize>
    </graphicData>
    <thingClass>ThingWithComps</thingClass>
    <useHitPoints>true</useHitPoints>
    <statBases>
      <MaxHitPoints>120</MaxHitPoints>
      <MarketValue>300</MarketValue>
      <Mass>0.5</Mass>
      <Flammability>0.7</Flammability>
    </statBases>
    <tradeTags>
      <li>Serum</li>
    </tradeTags>
    <tradeability>Sellable</tradeability>
    <stackLimit>10</stackLimit>
    <thingCategories>
      <li>Manufactured</li>
    </thingCategories>
    <costList>
      <ComponentStamped>1</ComponentStamped>
      <Tungsteel>20</Tungsteel>
    </costList>
    <recipeMaker>
      <workAmount>2000</workAmount>
      <researchPrerequisite>DMS_MechBasis</researchPrerequisite>
      <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
      <workSkill>Crafting</workSkill>
      <recipeUsers>
        <li>DMS_TableMachinePrinter</li>
      </recipeUsers>
    </recipeMaker>
    <comps>
      <li Class="CompProperties_Usable">
        <useJob>UseItem</useJob>
        <useLabel>Use {0_label}</useLabel>
        <useDuration>40</useDuration>
        <showUseGizmo>true</showUseGizmo>
      </li>
      <li Class="DMS.CompProperties_AddHediffOnTarget">
        <compClass>DMS.CompTargetable_AddHediffOnTarget</compClass>
        <hediffDef>DMS_ReinforcedFrame</hediffDef>
        <soundDef>DMS_EquipGear</soundDef>
      </li>
    </comps>
  </ThingDef>

  <HediffDef>
    <defName>DMS_ReinforcedFrame</defName>
    <hediffClass>Hediff</hediffClass>
    <label>reinforced frame</label>
    <description>Using tungsten steel to replace parts of the robot's frame that are prone to wear can effectively improve the durability during high-intensity combat and reduce the time spent on maintenance. But in exchange it will significantly increase the weight of the mech and affect its speed.</description>
    <descriptionHyperlinks>
      <ThingDef>DMS_ReinforcedFrame</ThingDef>
    </descriptionHyperlinks>
    <defaultLabelColor>(1, 1, 1)</defaultLabelColor>
    <isBad>false</isBad>
    <defaultInstallPart>DMS_Chassis</defaultInstallPart>
    <countsAsAddedPartOrImplant>true</countsAsAddedPartOrImplant>
    <stages>
      <li>
        <capMods>
          <li>
            <capacity>Moving</capacity>
            <postFactor>0.9</postFactor>
          </li>
        </capMods>
        <statFactors>
          <AimingDelayFactor>0.9</AimingDelayFactor>
          <IncomingDamageFactor>0.9</IncomingDamageFactor>
          <PawnTrapSpringChance>1.1</PawnTrapSpringChance>
        </statFactors>
      </li>
    </stages>
  </HediffDef>

  <!-- 裂變電池 -->
  <ThingDef ParentName="ResourceBase">
    <defName>DMS_NuclearBattery</defName>
    <label>nuclear battery</label>
    <description>A nuclear fission battery with a simple structure, commonly found in many unmanned signal stations and defense robots, consists of six high-density uranium-235 columns near critical mass and thermocouples integrated and wrapped in a high-strength shell. Its energy is enough to make most models of automatroid operate for decades.</description>
    <descriptionHyperlinks>
      <HediffDef>DMS_NuclearBattery</HediffDef>
    </descriptionHyperlinks>
    <graphicData>
      <texPath>Things/Resource/NuclearBattery</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>1</drawSize>
    </graphicData>
    <thingClass>ThingWithComps</thingClass>
    <useHitPoints>true</useHitPoints>
    <statBases>
      <MarketValue>2000</MarketValue>
      <MaxHitPoints>120</MaxHitPoints>
      <Mass>8.5</Mass>
    </statBases>
    <tradeTags>
      <li>Serum</li>
    </tradeTags>
    <tradeability>Sellable</tradeability>
    <stackLimit>10</stackLimit>
    <thingCategories>
      <li>Manufactured</li>
    </thingCategories>
    <costList />
    <comps>
      <li Class="CompProperties_Usable">
        <useJob>UseItem</useJob>
        <useLabel>Use {0_label}</useLabel>
        <useDuration>40</useDuration>
        <showUseGizmo>true</showUseGizmo>
      </li>
      <li Class="DMS.CompProperties_AddHediffOnTarget">
        <compClass>DMS.CompTargetable_AddHediffOnTarget</compClass>
        <hediffDef>DMS_NuclearBattery</hediffDef>
        <soundDef>DMS_EquipGear</soundDef>
        <targetBodyPartDefs>
          <li>DMS_Battery</li>
          <li>Reactor</li>
        </targetBodyPartDefs>
      </li>
    </comps>
  </ThingDef>

  <HediffDef>
    <defName>DMS_NuclearBattery</defName>
    <hediffClass>Hediff</hediffClass>
    <label>nuclear battery</label>
    <description>The abundant output of installed nuclear fission battery eliminates the need for recharge. it can also be overloaded to produce a nuclear explosion comparable to an anti-gram weapon to destroy the enemy together.</description>
    <descriptionHyperlinks>
      <ThingDef>DMS_NuclearBattery</ThingDef>
    </descriptionHyperlinks>
    <defaultLabelColor>(1, 1, 1)</defaultLabelColor>
    <isBad>false</isBad>
    <defaultInstallPart>DMS_Battery</defaultInstallPart>
    <stages>
      <li>
        <statFactors>
          <MechEnergyUsageFactor>0.25</MechEnergyUsageFactor>
        </statFactors>
      </li>
    </stages>
    <abilities>
      <li>DMS_NuclearOverload</li>
    </abilities>
  </HediffDef>

  <RecipeDef MayRequire="aoba.fortress.industrial.nucleardawn">
    <defName>DMS_Make_NuclearBattery</defName>
    <label>make nuclear battery</label>
    <description>make nuclear battery using enriched uranium.</description>
    <jobString>Fabricating.</jobString>
    <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
    <effectWorking>Cook</effectWorking>
    <soundWorking>Recipe_Machining</soundWorking>
    <unfinishedThingDef>UnfinishedComponent</unfinishedThingDef>
    <recipeUsers>
      <li>DMS_TableMachinePrinter</li>
    </recipeUsers>
    <skillRequirements>
      <Crafting>8</Crafting>
    </skillRequirements>
    <workSkill>Crafting</workSkill>
    <researchPrerequisite>FT_NuclearDawn</researchPrerequisite>
    <workAmount>3000</workAmount>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>FT_EnrichedUranium</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
      <li>
        <filter>
          <thingDefs>
            <li>ComponentStamped</li>
          </thingDefs>
        </filter>
        <count>2</count>
      </li>
      <li>
        <filter>
          <thingDefs>
            <li>Tungsteel</li>
          </thingDefs>
        </filter>
        <count>20</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>FT_EnrichedUranium</li>
        <li>ComponentStamped</li>
        <li>Tungsteel</li>
      </thingDefs>
    </fixedIngredientFilter>
    <products>
      <DMS_NuclearBattery>1</DMS_NuclearBattery>
    </products>
  </RecipeDef>

  <!-- TODO合成肌腱 20人工肌腱，近戰迴避*1.15 移動速度*1.25，能源消耗*1.1 -->
  <ThingDef ParentName="ResourceBase">
    <defName>DMS_SyntheticTendon</defName>
    <label>synthetic tendon</label>
    <description>A biosynthetic muscles attached on the outer layer of mechanical limbs. can effectively increase output but will bring additional energy consumption.</description>
    <descriptionHyperlinks>
      <HediffDef>DMS_SyntheticTendon</HediffDef>
    </descriptionHyperlinks>
    <graphicData>
      <texPath>Things/Resource/NuclearBattery</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>1</drawSize>
    </graphicData>
    <thingClass>ThingWithComps</thingClass>
    <useHitPoints>true</useHitPoints>
    <statBases>
      <MarketValue>2000</MarketValue>
      <MaxHitPoints>120</MaxHitPoints>
      <Mass>8.5</Mass>
    </statBases>
    <tradeTags>
      <li>Serum</li>
    </tradeTags>
    <tradeability>Sellable</tradeability>
    <stackLimit>10</stackLimit>
    <thingCategories>
      <li>Manufactured</li>
    </thingCategories>
    <costList />
    <comps>
      <li Class="CompProperties_Usable">
        <useJob>UseItem</useJob>
        <useLabel>Use {0_label}</useLabel>
        <useDuration>40</useDuration>
        <showUseGizmo>true</showUseGizmo>
      </li>
      <li Class="DMS.CompProperties_AddHediffOnTarget">
        <compClass>DMS.CompTargetable_AddHediffOnTarget</compClass>
        <hediffDef>DMS_SyntheticTendon</hediffDef>
        <soundDef>DMS_EquipGear</soundDef>
        <targetBodyPartDefs>
          <li>DMS_SynthicLeg</li>
          <li>MechanicalLeg</li>
        </targetBodyPartDefs>
      </li>
    </comps>
  </ThingDef>
  <HediffDef>
    <defName>DMS_SyntheticTendon</defName>
    <hediffClass>Hediff</hediffClass>
    <label>synthetic tendon</label>
    <description>A biosynthetic muscles attached on the outer layer of mechanical limbs. can effectively increase output but will bring additional energy consumption.</description>
    <descriptionHyperlinks>
      <ThingDef>DMS_SyntheticTendon</ThingDef>
    </descriptionHyperlinks>
    <defaultLabelColor>(1, 1, 1)</defaultLabelColor>
    <isBad>false</isBad>
    <defaultInstallPart>DMS_Battery</defaultInstallPart>
    <stages>
      <li>
        <statFactors>
          <MeleeDodgeChance>1.15</MeleeDodgeChance>
          <MoveSpeed>1.25</MoveSpeed>
        </statFactors>
        <statOffsets>
          <MechEnergyUsageFactor>0.05</MechEnergyUsageFactor>
        </statOffsets>
      </li>
    </stages>
  </HediffDef>

  <ThingDef ParentName="ResourceBase">
    <defName>DMS_HeavyHydraulicFrame</defName>
    <label>heavy hydraulic frame</label>
    <description>Heavy add-on module for capability to mount heavy weapons on mech iguana and gecko.</description>
    <descriptionHyperlinks>
      <HediffDef>DMS_HeavyHydraulicFrame</HediffDef>
      <ThingDef>DMS_Mech_Iguana</ThingDef>
      <ThingDef>DMS_Mech_Gecko</ThingDef>
      <ThingDef>DMS_Mech_Tarbosaurus</ThingDef>
    </descriptionHyperlinks>
    <graphicData>
      <texPath>Things/Resource/NuclearBattery</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>1</drawSize>
    </graphicData>
    <thingClass>ThingWithComps</thingClass>
    <useHitPoints>true</useHitPoints>
    <statBases>
      <MarketValue>2000</MarketValue>
      <MaxHitPoints>120</MaxHitPoints>
      <Mass>8.5</Mass>
    </statBases>
    <tradeTags>
      <li>Serum</li>
    </tradeTags>
    <tradeability>Sellable</tradeability>
    <stackLimit>10</stackLimit>
    <thingCategories>
      <li>Manufactured</li>
    </thingCategories>
    <costList />
    <comps>
      <li Class="CompProperties_Usable">
        <useJob>UseItem</useJob>
        <useLabel>Use {0_label}</useLabel>
        <useDuration>40</useDuration>
        <showUseGizmo>true</showUseGizmo>
      </li>
      <li Class="DMS.CompProperties_AddHediffOnTarget">
        <compClass>DMS.CompTargetable_AddHediffOnTarget</compClass>
        <hediffDef>DMS_HeavyHydraulicFrame</hediffDef>
        <soundDef>DMS_EquipGear</soundDef>
        <targetBodyPartDefs>
          <li>DMS_HeavyChassis</li>
        </targetBodyPartDefs>
        <supportRaceDefs>
          <li>DMS_Mech_Iguana</li>
          <li>DMS_Mech_Gecko</li>
          <li>DMS_Mech_Tarbosaurus</li>
        </supportRaceDefs>
      </li>
    </comps>
  </ThingDef>
  <HediffDef>
    <defName>DMS_HeavyHydraulicFrame</defName>
    <hediffClass>Hediff</hediffClass>
    <label>heavy hydraulic frame</label>
    <description>a heavy hydraulic module and power pack for bipedal mechs, gain capability for heavier lifting and also mount heavy weapons.</description>
    <descriptionHyperlinks>
      <ThingDef>DMS_HeavyHydraulicFrame</ThingDef>
      <ThingDef>DMS_Mech_Iguana</ThingDef>
      <ThingDef>DMS_Mech_Gecko</ThingDef>
      <ThingDef>DMS_Mech_Tarbosaurus</ThingDef>
    </descriptionHyperlinks>
    <defaultLabelColor>(1, 1, 1)</defaultLabelColor>
    <isBad>false</isBad>
    <defaultInstallPart>DMS_HeavyChassis</defaultInstallPart>
    <stages>
      <li>
        <statFactors>
          <MoveSpeed>0.9</MoveSpeed>
        </statFactors>
        <statOffsets>
          <MechEnergyUsageFactor>0.1</MechEnergyUsageFactor>
        </statOffsets>
      </li>
    </stages>
    <renderNodeProperties>
      <li>
        <debugLabel>hydraulic frame</debugLabel>
        <nodeClass>PawnRenderNode</nodeClass>
        <workerClass>PawnRenderNodeWorker</workerClass>
        <parentTagDef>Body</parentTagDef>
        <baseLayer>20</baseLayer>
        <drawSize>1.75</drawSize>
        <pawnType>Any</pawnType>
        <useGraphic>true</useGraphic>
        <texPath>Things/Modifications/HydraulicFrame/render</texPath>
        <drawData>
          <defaultData>
            <layer>20</layer>
          </defaultData>
          <dataEast>
            <offset>(-0.55,0,0.1)</offset>
          </dataEast>
          <dataWest>
            <offset>(0.55,0,0.1)</offset>
          </dataWest>
          <dataNorth>
            <offset>(0,0,0)</offset>
          </dataNorth>
          <dataSouth>
            <offset>(0,0,0.1)</offset>
            <layer>0</layer>
          </dataSouth>
        </drawData>
      </li>
    </renderNodeProperties>
  </HediffDef>
  <!-- TODO夜戰傳感器(CE)，夜戰瞄準能力200% -->
  <!-- TODO SS反步兵系統，一種安裝於機兵外殼上的反步兵地雷系統，能夠激活並對周圍的步兵造成可觀的殺傷效果。殖民艦隊軍方曾關於使用這類裝備是否有違倫理而曾有過一段時間的討論，最終基於對生物兵器威脅的有效性依然 -->
  <!-- TODO重啟協議，死後1小時復活並有25%機率狂暴 -->

  <!-- TODO戰鬥框架-擴容貨箱掛載 +200KG攜帶能力，移動速度*0.75，近戰迴避*0.8 -->

  <!-- TODO戰鬥框架-機動防盾掛載 -->

  <!-- TODO戰鬥框架-蜂窩火箭掛載 -->

  <!-- TODO戰鬥框架-重型彈藥掛載(增加額外的加特林兼容) -->

  <!-- TODO操作系統覆寫 給機兵增加Gun的支持，代價是SupportedWeapon不顯示-->

</Defs>	