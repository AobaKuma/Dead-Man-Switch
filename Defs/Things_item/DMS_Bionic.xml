<?xml version="1.0" encoding="utf-8"?>

<Defs>
  <ThingDef Name="DMS_BioMechBionicBase" ParentName="BodyPartBase" Abstract="True">
    <techLevel>Industrial</techLevel>
    <thingCategories>
      <li>BodyPartsBionic</li>
    </thingCategories>
    <graphicData>
      <texPath>Things/Item/Health/HealthItem</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>0.80</drawSize>
      <color>(75,75,75)</color>
    </graphicData>
    <tradeTags>
      <li>Bionic</li>
    </tradeTags>
    <techHediffsTags>
      <li>DMS_BM_Bionic</li>
    </techHediffsTags>
    <statBases>
      <WorkToMake>20000</WorkToMake>
    </statBases>
    <recipeMaker>
      <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
      <workSkill>Crafting</workSkill>
      <effectWorking>Smith</effectWorking>
      <soundWorking>Recipe_Smith</soundWorking>
      <unfinishedThingDef>UnfinishedHealthItemBionic</unfinishedThingDef>
      <skillRequirements>
        <Crafting>10</Crafting>
      </skillRequirements>
      <researchPrerequisite>DMS_Prosthetic</researchPrerequisite>
      <recipeUsers>
        <li>DMS_TableMachinePrinter</li>
      </recipeUsers>
      <displayPriority>300</displayPriority>
    </recipeMaker>
  </ThingDef>

  <!-- DMS_ProstheticEye -->
  <ThingDef ParentName="DMS_BioMechBionicBase">
    <defName>DMS_ProstheticEye</defName>
    <label>bio-mechanical visual senser</label>
    <description>An artificial light receiver with nerve-link, with night vision and aim assist it might be better than the original one...maybe ?</description>
    <descriptionHyperlinks><RecipeDef>DMS_InstallProstheticEye</RecipeDef></descriptionHyperlinks>
    <costList>
      <Tungsteel>15</Tungsteel>
      <Plasfiber>5</Plasfiber>
      <ComponentSpacer>1</ComponentSpacer>
    </costList>
    <thingSetMakerTags><li>RewardStandardMidFreq</li></thingSetMakerTags>
    <statBases>
      <Mass>0.3</Mass>
    </statBases>
  </ThingDef>

  <HediffDef ParentName="AddedBodyPartBase">
    <defName>DMS_ProstheticEye</defName>
    <label>bio-mechanical visual senser</label>
    <labelNoun>a bionic senser</labelNoun>
    <description>An installed visual sensor, as a replacement of eye.</description>
    <descriptionHyperlinks><ThingDef>DMS_ProstheticEye</ThingDef></descriptionHyperlinks>
    <spawnThingOnRemoved>DMS_ProstheticEye</spawnThingOnRemoved>
    <woundAnchorRange>0</woundAnchorRange>
    <displayWound>true</displayWound>
    <stages>
      <li>
        <statOffsets>
          <RestFallRateFactor>0.1</RestFallRateFactor>
					<AimingDelayFactor>-0.25</AimingDelayFactor>
        </statOffsets>
      </li>
    </stages>
    <addedPartProps>
      <solid>true</solid>
      <partEfficiency>1.15</partEfficiency>
      <betterThanNatural>true</betterThanNatural>
    </addedPartProps>
    <eyeGraphicSouth>
      <graphicClass>Graphic_Single</graphicClass>
      <texPath>Things/Misc/DMS_BionicEye_south</texPath><!-- 這個以後改 -->
    </eyeGraphicSouth>
    <eyeGraphicEast>
      <graphicClass>Graphic_Single</graphicClass>
      <texPath>Things/Misc/DMS_BionicEye_east</texPath><!-- 這個以後改 -->
    </eyeGraphicEast>
    <eyeGraphicScale>0.2</eyeGraphicScale>
  </HediffDef>

  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>DMS_InstallProstheticEye</defName>
    <label>install bio-mechanical visual senser</label>
    <description>Install a bio-mechanical visual senser.</description>
    <descriptionHyperlinks>
      <ThingDef>DMS_ProstheticEye</ThingDef>
      <HediffDef>DMS_ProstheticEye</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing bionic eye.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>DMS_ProstheticEye</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>DMS_ProstheticEye</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Eye</li>
    </appliedOnFixedBodyParts>
    <addsHediff>DMS_ProstheticEye</addsHediff>
  </RecipeDef>

  <!-- Bionic arm -->

  <HediffDef ParentName="AddedBodyPartBase">
    <defName>DMS_ProstheticArm</defName>
    <label>bio-mechanical arm</label>
    <labelNoun>a bio-mechanical arm</labelNoun>
    <description>An installed bio-mechanical arm.</description>
    <descriptionHyperlinks><ThingDef>DMS_ProstheticArm</ThingDef></descriptionHyperlinks>
    <comps>
      <li Class="HediffCompProperties_VerbGiver">
        <tools>
          <li>
            <label>fist</label>
            <capacities>
              <li>Blunt</li>
            </capacities>
            <power>12</power>
            <cooldownTime>2</cooldownTime>
            <soundMeleeHit>MeleeHit_BionicPunch</soundMeleeHit>
            <soundMeleeMiss>MeleeMiss_BionicPunch</soundMeleeMiss>
          </li>
        </tools>
      </li>
    </comps>
    <stages>
      <li>
        <statOffsets>
          <RestFallRateFactor>0.1</RestFallRateFactor>
          <IncomingDamageFactor>-0.05</IncomingDamageFactor>
        </statOffsets>
      </li>
    </stages>
    <spawnThingOnRemoved>DMS_ProstheticArm</spawnThingOnRemoved>
    <addedPartProps>
      <solid>true</solid>
      <partEfficiency>1.15</partEfficiency>
      <betterThanNatural>true</betterThanNatural>
    </addedPartProps>
  </HediffDef>

  <ThingDef ParentName="DMS_BioMechBionicBase">
    <defName>DMS_ProstheticArm</defName>
    <label>bio-mechanical arm</label>
    <description>An advanced artificial arm. Silenced mini-servos give great strength, while the biogel nerve-link gives exquisite control. A lattice-dust healing system allows it to recover from damage. It is better than a biological arm in almost every way.</description>
    <descriptionHyperlinks><RecipeDef>DMS_InstallProstheticArm</RecipeDef></descriptionHyperlinks>
    <costList>
      <Tungsteel>25</Tungsteel>
      <Plasfiber>15</Plasfiber>
      <ComponentStamped>5</ComponentStamped>
    </costList>
    <thingSetMakerTags><li>RewardStandardMidFreq</li></thingSetMakerTags>
    <statBases>
      <Mass>5</Mass>
    </statBases>
  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>DMS_InstallProstheticArm</defName>
    <label>install bio-mechanical arm</label>
    <description>Install a bio-mechanical arm.</description>
    <descriptionHyperlinks>
      <ThingDef>DMS_ProstheticArm</ThingDef>
      <HediffDef>DMS_ProstheticArm</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing bio-mechanical arm.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>DMS_ProstheticArm</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>DMS_ProstheticArm</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Shoulder</li>
    </appliedOnFixedBodyParts>
    <addsHediff>DMS_ProstheticArm</addsHediff>
  </RecipeDef>

  <!-- Bionic leg -->

  <HediffDef ParentName="AddedBodyPartBase">
    <defName>DMS_ProstheticLeg</defName>
    <label>bio-mechanical leg</label>
    <labelNoun>a bio-mechanical leg</labelNoun>
    <description>An installed bio-mechanical leg.</description>
    <descriptionHyperlinks><ThingDef>DMS_ProstheticLeg</ThingDef></descriptionHyperlinks>
    <spawnThingOnRemoved>DMS_ProstheticLeg</spawnThingOnRemoved>
    <stages>
      <li>
        <statOffsets>
          <RestFallRateFactor>0.1</RestFallRateFactor>
          <IncomingDamageFactor>-0.05</IncomingDamageFactor>
        </statOffsets>
      </li>
    </stages>
    <addedPartProps>
      <solid>true</solid>
      <partEfficiency>1.15</partEfficiency>
      <betterThanNatural>true</betterThanNatural>
    </addedPartProps>
  </HediffDef>

  <ThingDef ParentName="DMS_BioMechBionicBase">
    <defName>DMS_ProstheticLeg</defName>
    <label>bio-mechanical leg</label>
    <description>An advanced artificial leg. With its biogel nerve-link, powerful mini-servos, and lattice-dust healing system, it is better than a biological leg in almost every way.</description>
    <descriptionHyperlinks><RecipeDef>DMS_InstallProstheticLeg</RecipeDef></descriptionHyperlinks>
    <costList>
      <Tungsteel>25</Tungsteel>
      <Plasfiber>15</Plasfiber>
      <ComponentStamped>5</ComponentStamped>
    </costList>
    <thingSetMakerTags><li>RewardStandardMidFreq</li></thingSetMakerTags>
    <statBases>
      <Mass>8</Mass>
    </statBases>
  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>DMS_InstallProstheticLeg</defName>
    <label>install bio-mechanical leg</label>
    <description>Install a bio-mechanical leg.</description>
    <descriptionHyperlinks>
      <ThingDef>DMS_ProstheticLeg</ThingDef>
      <HediffDef>DMS_ProstheticLeg</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing bio-mechanical leg.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>DMS_ProstheticLeg</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>DMS_ProstheticLeg</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Leg</li>
    </appliedOnFixedBodyParts>
    <addsHediff>DMS_ProstheticLeg</addsHediff>
  </RecipeDef>

  <!-- 神經輔助脊索 -->

  <HediffDef ParentName="AddedBodyPartBase">
    <defName>DMS_ProstheticSpine</defName>
    <label>bio-mechanical neurochord</label>
    <labelNoun>An advanced bio-mechanical spine work as a sub-brain \n\n It can take over the user's reflex nerves and thereby reduce the operator's brain burden, but has some side effects.</labelNoun>
    <description>An installed bionic spine.</description>
    <descriptionHyperlinks><ThingDef>DMS_ProstheticSpine</ThingDef></descriptionHyperlinks>
    <spawnThingOnRemoved>DMS_ProstheticSpine</spawnThingOnRemoved>
    <stages>
      <li>
        <statOffsets>
          <RestFallRateFactor>-0.5</RestFallRateFactor>
        </statOffsets>
      </li>
    </stages>
    <addedPartProps>
      <solid>true</solid>
      <betterThanNatural>true</betterThanNatural>
    </addedPartProps>
    <comps>
      <li Class="HediffCompProperties_ReactOnDamage">
        <damageDefIncoming>EMP</damageDefIncoming>
        <createHediff>BrainShock</createHediff>
      </li>
    </comps>
  </HediffDef>

  <ThingDef ParentName="DMS_BioMechBionicBase">
    <defName>DMS_ProstheticSpine</defName>
    <label>bio-mechanical neurochord</label>
    <description>An advanced bio-mechanical spine which also work as a sub-brain to compatible with other prostheses by sharing reflex nerves.</description>
    <descriptionHyperlinks><RecipeDef>DMS_InstallProstheticSpine</RecipeDef></descriptionHyperlinks>
    <costList>
      <Tungsteel>20</Tungsteel>
      <Plasfiber>10</Plasfiber>
      <ComponentStamped>5</ComponentStamped>
      <ComponentSpacer>2</ComponentSpacer>
    </costList>
    <statBases>
      <Mass>2</Mass>
    </statBases>
  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>DMS_InstallProstheticSpine</defName>
    <label>install bio-mechanical neurochord</label>
    <description>Install a bio-mechanical neurochord.</description>
    <descriptionHyperlinks>
      <ThingDef>DMS_ProstheticSpine</ThingDef>
      <HediffDef>DMS_ProstheticSpine</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing bio-mechanical neurochord.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>DMS_ProstheticSpine</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>DMS_ProstheticSpine</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Spine</li>
    </appliedOnFixedBodyParts>
    <addsHediff>DMS_ProstheticSpine</addsHediff>
  </RecipeDef>

<!-- 感官過濾芯片 -->

  <HediffDef ParentName="ImplantHediffBase">
    <defName>DMS_SensoryFilter</defName>
    <label>sensory filter</label>
    <labelNoun>a sensory filter</labelNoun>
    <description>No will to fear,\nNo more to disgust,\nNo way to feel,\nNo tears to cry... \n\nAnd what else... \nis this little pawn have to sacrifice?</description>
    <descriptionHyperlinks><ThingDef>DMS_SensoryFilter</ThingDef></descriptionHyperlinks>
    <spawnThingOnRemoved>DMS_SensoryFilter</spawnThingOnRemoved>
    <disablesNeeds>
      <li>Rest</li>
      <li>Joy</li>
      <li>Beauty</li>
      <li>Comfort</li>
      <li>RoomSize</li>
      <li>Outdoors</li>
      <li>Indoors</li>
    </disablesNeeds>
    <stages>
      <li>
        <capMods>
          <li>
            <capacity>Talking</capacity>
            <postFactor>0.25</postFactor>
          </li>
        </capMods>
        <statOffsets>  
          <SocialImpact>-0.5</SocialImpact>
          <BondAnimalChanceFactor>-1</BondAnimalChanceFactor>
          <PsychicSensitivity>-1</PsychicSensitivity>
        </statOffsets>
    
      </li>
    </stages>
    <comps>
      <li Class="HediffCompProperties_ReactOnDamage">
        <damageDefIncoming>EMP</damageDefIncoming>
        <createHediff>BrainShock</createHediff>
      </li>
    </comps>
  </HediffDef>

  <ThingDef ParentName="DMS_BioMechBionicBase">
    <defName>DMS_SensoryFilter</defName>
    <label>sensory filter</label>
    <description>A signal filter which filtered the specific emotional feedback but will still have some need of moods in order to communicate with other normally, allowing user become a perfect soldier during war. However it is still regarded as an inhuman surgery nowaday and classified as a serious crime.</description>
    <descriptionHyperlinks><RecipeDef>DMS_InstallSensoryFilter</RecipeDef></descriptionHyperlinks>
    <thingSetMakerTags><li>RewardStandardLowFreq</li></thingSetMakerTags>
    <costList>
      <Plasfiber>15</Plasfiber>
      <ComponentSpacer>4</ComponentSpacer>
    </costList>
    <recipeMaker>
      <researchPrerequisite>DMS_OrganSurgery</researchPrerequisite>
    </recipeMaker>
  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallImplantBase">
    <defName>DMS_InstallSensoryFilter</defName>
    <label>install sensory filter</label>
    <description>Install a sensory filter.</description>
    <descriptionHyperlinks>
      <ThingDef>DMS_SensoryFilter</ThingDef>
      <HediffDef>DMS_SensoryFilter</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing sensory filter.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>DMS_SensoryFilter</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>DMS_SensoryFilter</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Brain</li>
    </appliedOnFixedBodyParts>
    <addsHediff>DMS_SensoryFilter</addsHediff>
  </RecipeDef>

  <RecipeDef ParentName="SurgeryRemoveImplantBase">
    <defName>DMS_RemoveSensoryFilter</defName>
    <label>remove sensory filter</label>
    <description>Remove sensory filter. May cause serious mental trauma.</description>
    <descriptionHyperlinks>
      <ThingDef>DMS_SensoryFilter</ThingDef>
      <HediffDef>DMS_SensoryFilter</HediffDef>
    </descriptionHyperlinks>
    <jobString>Removing sensory filter.</jobString>
    <removesHediff>DMS_SensoryFilter</removesHediff>
  </RecipeDef>

<!-- 營養泵送接口 -->

  <HediffDef ParentName="AddedBodyPartBase">
    <defName>DMS_NutrientPort</defName>
    <label>nutrition port</label>
    <labelNoun>an nutrition port</labelNoun>
    <description>a total overhaul removed part of user's digestive system and replace with an artificial nutrition storage/fueling port.</description>
    <descriptionHyperlinks><ThingDef>DMS_NutrientPort</ThingDef></descriptionHyperlinks>
    <spawnThingOnRemoved>DMS_NutrientPort</spawnThingOnRemoved>
    <stages>
      <li>
        <statOffsets>
          <MaxNutrition>2</MaxNutrition>   
        </statOffsets>
        <foodPoisoningChanceFactor>1</foodPoisoningChanceFactor>
      </li>
    </stages>
    <addedPartProps>
      <solid>true</solid>
      <partEfficiency>0.2</partEfficiency>
      <betterThanNatural>true</betterThanNatural>
    </addedPartProps>
  </HediffDef>

  <ThingDef ParentName="DMS_BioMechBionicBase">
    <defName>DMS_NutrientPort</defName>
    <label>nutrition port</label>
    <description>a total overhaul removed part of user's digestive system and replace with an artificial nutrition storage/fueling port.</description>
    <descriptionHyperlinks><RecipeDef>DMS_InstallNutrientPort</RecipeDef></descriptionHyperlinks>
    <thingSetMakerTags><li>RewardStandardLowFreq</li></thingSetMakerTags>
    <costList>
      <Plasfiber>15</Plasfiber>
      <Neutroamine>20</Neutroamine>
      <ComponentSpacer>2</ComponentSpacer>
    </costList>
    <recipeMaker>
      <researchPrerequisite>DMS_OrganSurgery</researchPrerequisite>
    </recipeMaker>
  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallBodyPartArtificialBase">
    <defName>DMS_InstallNutrientPort</defName>
    <label>install nutrition port</label>
    <description>Install a nutrition port.</description>
    <descriptionHyperlinks>
      <ThingDef>DMS_NutrientPort</ThingDef>
      <HediffDef>DMS_NutrientPort</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing nutrition port.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>DMS_NutrientPort</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>DMS_NutrientPort</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Stomach</li>
    </appliedOnFixedBodyParts>
    <addsHediff>DMS_NutrientPort</addsHediff>
  </RecipeDef>

  <ThingDef Name="DMS_SynthicBionicBase" ParentName="BodyPartBase" Abstract="True">
    <techLevel>Spacer</techLevel>
    <thingCategories>
      <li>BodyPartsBionic</li>
    </thingCategories>
    <graphicData>
      <texPath>Things/Item/Health/HealthItem</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>0.80</drawSize>
      <color>(189,169,118)</color>
    </graphicData>
    <tradeTags>
      <li>Bionic</li>
    </tradeTags>
    <techHediffsTags>
      <li>DMS_Synth_Bionic</li>
    </techHediffsTags>
    <statBases>
      <WorkToMake>26000</WorkToMake>
    </statBases>
    <recipeMaker>
      <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
      <workSkill>Crafting</workSkill>
      <effectWorking>Smith</effectWorking>
      <soundWorking>Recipe_Smith</soundWorking>
      <unfinishedThingDef>UnfinishedHealthItemBionic</unfinishedThingDef>
      <skillRequirements>
        <Crafting>10</Crafting>
        <Medical>5</Medical>
      </skillRequirements>
      <researchPrerequisite>DMS_Bionics</researchPrerequisite>
      <recipeUsers>
        <li>DMS_TableAtrifuscle</li>
      </recipeUsers>
      <displayPriority>300</displayPriority>
    </recipeMaker>
  </ThingDef>

</Defs>	